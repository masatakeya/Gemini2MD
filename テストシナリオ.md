# Gemini2MD テストシナリオ

このドキュメントは、Chrome拡張機能「Gemini2MD」が期待通りに動作するかを確認するためのテストシナリオをまとめたものです。

---

## 1. 基本的な動作確認

### シナリオ 1.1: 通常のチャット履歴のエクスポート

* **目的:** 短いチャット履歴が正しくMarkdown形式でエクスポートされることを確認する。
* **手順:**
    1.  Geminiのウェブサイト（`gemini.google.com`）にアクセスする。
    2.  通常の短いチャット（数ターン）が含まれる会話を開く。
    3.  ブラウザのツールバーにある「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * チャット履歴が自動的にダウンロードされる。
    * ファイル名が「日付\_チャットタイトル.md」（例: `20250711_チャットのタイトル.md`）のような形式で適切に生成されている。
    * ダウンロードされたMarkdownファイルを開くと、ユーザーのプロンプトとGeminiの応答が全て含まれている。
    * 各メッセージの前に「## ユーザー」「## Gemini」のような適切な見出しが付いている。
    * タイムスタンプ（日付のみ、例: `2025-07-11`）が各メッセージに含まれている。

### シナリオ 1.2: 長いチャット履歴のエクスポート

* **目的:** 非常に長いチャット履歴でも、全てのコンテンツが漏れなくエクスポートされることを確認する。
* **手順:**
    1.  Geminiのウェブサイトにアクセスする。
    2.  非常に長いチャット（例: 50ターン以上）が含まれる会話を開く。
    3.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * シナリオ1.1と同様に、全ての履歴が漏れなくダウンロードされ、基本的な書式も維持されている。
    * （将来的に性能要件を定めた場合）パフォーマンスが許容範囲内である。

---

## 2. 書式（フォーマット）の保持確認

### シナリオ 2.1: コードブロックが含まれる履歴のエクスポート

* **目的:** Geminiの応答に含まれるコードブロックがMarkdown形式で正しく表現されることを確認する。
* **手順:**
    1.  Geminiのウェブサイトにアクセスする。
    2.  Geminiがコードブロック（例: Python, JavaScriptなど、複数行のコードを含む）を含む応答をしたチャットを開く。
    3.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * Markdownファイル内で、コードブロックがバッククォート3つ（` ` `）で囲まれ、適切に整形されている。

### シナリオ 2.2: リスト（箇条書き/番号付き）が含まれる履歴のエクスポート

* **目的:** Geminiの応答に含まれる箇条書きや番号付きリストがMarkdown形式で正しく表現されることを確認する。
* **手順:**
    1.  Geminiのウェブサイトにアクセスする。
    2.  Geminiが箇条書きや番号付きリストを含む応答をしたチャットを開く。
    3.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * Markdownファイル内で、リストが適切にMarkdownのリスト構文（`- ` や `1. ` など）で整形されている。

### シナリオ 2.3: テキスト装飾、リンク、テーブル、数式が含まれる履歴のエクスポート

* **目的:** 太字、斜体、リンク、テーブル、数式といった多様な書式要素が正しく処理されることを確認する。
* **手順:**
    1.  Geminiのウェブサイトにアクセスする。
    2.  以下のいずれか、または複数の書式要素を含むチャットを開く:
        * 太字、斜体を含むテキスト
        * ハイパーリンク
        * テーブル（もしあれば）
        * 数式（LaTeX形式など）
    3.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * Markdownファイル内で、それぞれの書式が適切なMarkdown構文（`**太字**`, `*斜体*`, `[リンクテキスト](URL)` など）で再現されている。
    * テーブルがあればMarkdownのテーブル構文で表現されている。
    * 数式はそのまま文字列として出力されている。

---

## 3. エラーハンドリング/特殊なケース

### シナリオ 3.1: チャットページ以外での実行

* **目的:** `gemini.google.com` 以外のページで拡張機能が不意に実行されないことを確認する。
* **手順:**
    1.  `gemini.google.com` 以外のウェブサイト（例: `google.com` や任意のウェブサイト）にアクセスする。
    2.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * エクスポート処理が実行されない。
    * 可能であれば、「このページでは動作しません」のようなエラーメッセージや、操作ガイドがポップアップに表示される。

### シナリオ 3.2: 空のチャット履歴のエクスポート

* **目的:** まだメッセージが送信されていない、新規のチャットページで実行した場合の挙動を確認する。
* **手順:**
    1.  Geminiのウェブサイトにアクセスする。
    2.  まだメッセージが一つも送信されていない、新規のチャットを開く。
    3.  「Gemini2MD」アイコンをクリックする。
* **期待する結果:**
    * 空のMarkdownファイルが生成される、または「エクスポートするメッセージがありません」のようなユーザーフレンドリーなメッセージがポップアップに表示される。